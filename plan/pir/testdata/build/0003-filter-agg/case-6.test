SELECT SUM(x) FILTER (WHERE x >= (SELECT MAX(y) FROM aux)) FROM table
---
WITH (
	ITERATE aux FIELDS [y]
	AGGREGATE MAX(y) AS "max"
) AS REPLACEMENT(0)
ITERATE table FIELDS [x] WHERE x >= SCALAR_REPLACEMENT(0)
AGGREGATE SUM(x) AS "sum"
